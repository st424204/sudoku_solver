<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<style>
input {
  height:30px;
  width:30px;
}
td:first-child {
  border-left:solid;
}
td:nth-child(3n) {
  border-right:solid ;
}
tr:first-child {
  border-top:solid;
}
tr:nth-child(3n) td {
  border-bottom:solid ;
}
</style>

</head>
<body>
<table>
<tr>
<td><input id="0_0" maxlength="1" size="2"></td>
<td><input id="0_1" maxlength="1" size="2"></td>
<td><input id="0_2" maxlength="1" size="2"></td>
<td><input id="0_3" maxlength="1" size="2"></td>
<td><input id="0_4" maxlength="1" size="2"></td>
<td><input id="0_5" maxlength="1" size="2"></td>
<td><input id="0_6" maxlength="1" size="2"></td>
<td><input id="0_7" maxlength="1" size="2"></td>
<td><input id="0_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="1_0" maxlength="1" size="2"></td>
<td><input id="1_1" maxlength="1" size="2"></td>
<td><input id="1_2" maxlength="1" size="2"></td>
<td><input id="1_3" maxlength="1" size="2"></td>
<td><input id="1_4" maxlength="1" size="2"></td>
<td><input id="1_5" maxlength="1" size="2"></td>
<td><input id="1_6" maxlength="1" size="2"></td>
<td><input id="1_7" maxlength="1" size="2"></td>
<td><input id="1_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="2_0" maxlength="1" size="2"></td>
<td><input id="2_1" maxlength="1" size="2"></td>
<td><input id="2_2" maxlength="1" size="2"></td>
<td><input id="2_3" maxlength="1" size="2"></td>
<td><input id="2_4" maxlength="1" size="2"></td>
<td><input id="2_5" maxlength="1" size="2"></td>
<td><input id="2_6" maxlength="1" size="2"></td>
<td><input id="2_7" maxlength="1" size="2"></td>
<td><input id="2_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="3_0" maxlength="1" size="2"></td>
<td><input id="3_1" maxlength="1" size="2"></td>
<td><input id="3_2" maxlength="1" size="2"></td>
<td><input id="3_3" maxlength="1" size="2"></td>
<td><input id="3_4" maxlength="1" size="2"></td>
<td><input id="3_5" maxlength="1" size="2"></td>
<td><input id="3_6" maxlength="1" size="2"></td>
<td><input id="3_7" maxlength="1" size="2"></td>
<td><input id="3_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="4_0" maxlength="1" size="2"></td>
<td><input id="4_1" maxlength="1" size="2"></td>
<td><input id="4_2" maxlength="1" size="2"></td>
<td><input id="4_3" maxlength="1" size="2"></td>
<td><input id="4_4" maxlength="1" size="2"></td>
<td><input id="4_5" maxlength="1" size="2"></td>
<td><input id="4_6" maxlength="1" size="2"></td>
<td><input id="4_7" maxlength="1" size="2"></td>
<td><input id="4_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="5_0" maxlength="1" size="2"></td>
<td><input id="5_1" maxlength="1" size="2"></td>
<td><input id="5_2" maxlength="1" size="2"></td>
<td><input id="5_3" maxlength="1" size="2"></td>
<td><input id="5_4" maxlength="1" size="2"></td>
<td><input id="5_5" maxlength="1" size="2"></td>
<td><input id="5_6" maxlength="1" size="2"></td>
<td><input id="5_7" maxlength="1" size="2"></td>
<td><input id="5_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="6_0" maxlength="1" size="2"></td>
<td><input id="6_1" maxlength="1" size="2"></td>
<td><input id="6_2" maxlength="1" size="2"></td>
<td><input id="6_3" maxlength="1" size="2"></td>
<td><input id="6_4" maxlength="1" size="2"></td>
<td><input id="6_5" maxlength="1" size="2"></td>
<td><input id="6_6" maxlength="1" size="2"></td>
<td><input id="6_7" maxlength="1" size="2"></td>
<td><input id="6_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="7_0" maxlength="1" size="2"></td>
<td><input id="7_1" maxlength="1" size="2"></td>
<td><input id="7_2" maxlength="1" size="2"></td>
<td><input id="7_3" maxlength="1" size="2"></td>
<td><input id="7_4" maxlength="1" size="2"></td>
<td><input id="7_5" maxlength="1" size="2"></td>
<td><input id="7_6" maxlength="1" size="2"></td>
<td><input id="7_7" maxlength="1" size="2"></td>
<td><input id="7_8" maxlength="1" size="2"></td>
</tr><br>
<tr>
<td><input id="8_0" maxlength="1" size="2"></td>
<td><input id="8_1" maxlength="1" size="2"></td>
<td><input id="8_2" maxlength="1" size="2"></td>
<td><input id="8_3" maxlength="1" size="2"></td>
<td><input id="8_4" maxlength="1" size="2"></td>
<td><input id="8_5" maxlength="1" size="2"></td>
<td><input id="8_6" maxlength="1" size="2"></td>
<td><input id="8_7" maxlength="1" size="2"></td>
<td><input id="8_8" maxlength="1" size="2"></td>
</tr><br>
</table>

<button onclick="sol();">SOLVE</button>
<button onclick="erase();">CLEAR</button>
<script>
	data = new Array(9);
	for(var i=0;i<9;i++)
			data[i]=new Array(9);
	position = [0,0];
	stack=[];
	var erase = function(){
		for(var i=0;i<9;i++)
			for(var j=0;j<9;j++)
				$("#"+i+"_"+j).val(0);
	}
	var grab_data = function(){
		position = [0,0];
		stack=[];
		for(var i=0;i<9;i++)
			for(var j=0;j<9;j++)
				data[i][j] = parseInt($("#"+i+"_"+j).val());
	}
	var legal = function(val){
		tmp = new Array(9); 
		for(var i=0;i<9;i++) tmp[i] = data[position[0]][i];
		if(tmp.indexOf(val) != -1) return false;
		for(var i=0;i<9;i++) tmp[i] = data[i][position[1]];
		if(tmp.indexOf(val) != -1) return false;
		x = position[0]-position[0]%3
		y = position[1]-position[1]%3
		index = 0
		for(var i=0;i<3;i++)
			for(var j=0;j<3;j++) tmp[index++] = data[i+x][j+y];
		if(tmp.indexOf(val) != -1) return false;
		return true;
	}
	
	var move_next = function(){
		position[1]+=1
		if(position[1] == 9){
			position[0]+=1
			position[1]=0
		}
	}
	var sol = function(){
		grab_data();
		while(1){
				if(position[0] == 9) break;
				if(data[position[0]][position[1]] <= 0){
					for(var i=1-data[position[0]][position[1]];i<11;i++){
						if( i<=9 && legal(i)){
							data[position[0]][position[1]] = i;
							stack.push([position[0],position[1]]);
							move_next();
							break;
						}
						else if( i >= 9 ){
							data[position[0]][position[1]] = 0 ;
							position = stack.pop();
							data[position[0]][position[1]] = -data[position[0]][position[1]];
							break;
						}
					}
				}
				else self.move_next();
		}
		update();
	}
	var update = function(){
		for(var i=0;i<9;i++)
		for(var j=0;j<9;j++)
			$("#"+i+"_"+j).val(data[i][j]);
	}
	
</script>
</body>

